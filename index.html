<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT Touch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .sensor-card {
            transition: all 0.3s ease;
        }
        .sensor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .gauge {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 50%;
        }
        .gauge-body {
            width: 100%;
            height: 0;
            padding-bottom: 50%;
            position: relative;
            border-top-left-radius: 100% 200%;
            border-top-right-radius: 100% 200%;
            overflow: hidden;
            background-color: #e0e0e0;
        }
        .gauge-fill {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #3b82f6;
            transform-origin: center top;
            transform: rotate(0.5turn);
            transition: transform 0.5s ease-out;
        }
        .gauge-cover {
            width: 75%;
            height: 150%;
            background-color: white;
            border-radius: 50%;
            position: absolute;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1) inset;
        }
        .nav-link {
            position: relative;
            padding-bottom: 0.5rem;
        }
        .nav-link.active:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #3b82f6;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Navigation Menu -->
    <nav class="bg-white shadow-sm">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <i class="fas fa-microchip text-blue-500 text-xl mr-2"></i>
                    <span class="font-semibold text-gray-800">ESP32 IoT</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#" class="nav-link active text-blue-600 font-medium" data-section="dashboard">
                        <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                    </a>
                    <a href="#" class="nav-link text-gray-600 hover:text-blue-600 font-medium" data-section="control">
                        <i class="fas fa-sliders-h mr-2"></i>Control
                    </a>
                    <a href="#" class="nav-link text-gray-600 hover:text-blue-600 font-medium" data-section="management">
                        <i class="fas fa-cog mr-2"></i>Device Management
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <div class="h-3 w-3 bg-green-500 rounded-full absolute -right-1 -top-1 animate-pulse"></div>
                        <span id="connection-status" class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">Connected</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-3xl font-bold text-gray-800">ESP32 IoT Dashboard</h1>
                <p class="text-gray-600">Monitor and control your connected devices</p>
            </div>
            <button id="refresh-btn" class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-full transition">
                <i class="fas fa-sync-alt"></i>
            </button>
        </header>

        <!-- Dashboard Section (Default Visible) -->
        <div id="dashboard-section">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
                <!-- Temperature Card -->
                <div class="sensor-card bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800">Temperature</h2>
                                <p class="text-gray-500">Living Room</p>
                            </div>
                            <div class="bg-red-100 text-red-800 p-2 rounded-lg">
                                <i class="fas fa-temperature-high text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-6">
                            <div class="gauge">
                                <div class="gauge-body">
                                    <div id="temp-gauge" class="gauge-fill"></div>
                                    <div class="gauge-cover">
                                        <span id="temp-value">24.5</span>°C
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 flex justify-between items-center">
                            <div class="text-sm text-gray-500">
                                <span>Min: 18°C</span>
                                <span class="mx-2">|</span>
                                <span>Max: 30°C</span>
                            </div>
                            <div class="text-sm font-medium" id="temp-timestamp">
                                Updated: Just now
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Humidity Card -->
                <div class="sensor-card bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800">Humidity</h2>
                                <p class="text-gray-500">Living Room</p>
                            </div>
                            <div class="bg-blue-100 text-blue-800 p-2 rounded-lg">
                                <i class="fas fa-tint text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-6">
                            <div class="gauge">
                                <div class="gauge-body">
                                    <div id="humidity-gauge" class="gauge-fill"></div>
                                    <div class="gauge-cover">
                                        <span id="humidity-value">45</span>%
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 flex justify-between items-center">
                            <div class="text-sm text-gray-500">
                                <span>Min: 30%</span>
                                <span class="mx-2">|</span>
                                <span>Max: 70%</span>
                            </div>
                            <div class="text-sm font-medium" id="humidity-timestamp">
                                Updated: Just now
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Light Control Card -->
                <div class="sensor-card bg-white rounded-xl shadow-md overflow-hidden">
                    <div class="p-6">
                        <div class="flex justify-between items-start">
                            <div>
                                <h2 class="text-xl font-semibold text-gray-800">Light Control</h2>
                                <p class="text-gray-500">Living Room LED</p>
                            </div>
                            <div class="bg-yellow-100 text-yellow-800 p-2 rounded-lg">
                                <i class="fas fa-lightbulb text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-8 flex flex-col space-y-4">
                            <div class="flex items-center justify-between">
                                <span class="text-gray-700">LED Status</span>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="led-toggle" class="sr-only peer">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                    <span class="ml-3 text-sm font-medium text-gray-900" id="led-status">OFF</span>
                                </label>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-gray-700">LED Brightness</span>
                                <input id="brightness-slider" type="range" min="0" max="255" value="128" class="w-32 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                <span id="brightness-value" class="text-sm font-medium text-gray-700 ml-2">50%</span>
                            </div>
                        </div>
                        <div class="mt-6">
                            <button id="apply-settings" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition flex items-center justify-center space-x-2">
                                <i class="fas fa-paper-plane"></i>
                                <span>Apply Settings</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Device Status Section -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8">
                <div class="p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Device Status</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="bg-green-100 text-green-800 p-3 rounded-full">
                                    <i class="fas fa-microchip"></i>
                                </div>
                                <div>
                                    <h3 class="font-medium text-gray-700">ESP32</h3>
                                    <p class="text-sm text-gray-500">Model: ESP32-WROOM-32</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="bg-blue-100 text-blue-800 p-3 rounded-full">
                                    <i class="fas fa-wifi"></i>
                                </div>
                                <div>
                                    <h3 class="font-medium text-gray-700">WiFi</h3>
                                    <p id="wifi-status" class="text-sm text-gray-500">Connected: HomeWiFi</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <div class="flex items-center space-x-3">
                                <div class="bg-purple-100 text-purple-800 p-3 rounded-full">
                                    <i class="fas fa-memory"></i>
                                </div>
                                <div>
                                    <h3 class="font-medium text-gray-700">Memory</h3>
                                    <p id="memory-status" class="text-sm text-gray-500">Free: 120KB</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Log Section -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-semibold text-gray-800">Device Logs</h2>
                        <button id="clear-logs" class="text-sm text-red-500 hover:text-red-700">
                            <i class="fas fa-trash-alt mr-1"></i> Clear Logs
                        </button>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4 h-64 overflow-y-auto">
                        <ul id="log-list" class="space-y-2">
                            <li class="text-sm text-gray-700">
                                <span class="text-gray-500">[10:23:45]</span> Device initialized
                            </li>
                            <li class="text-sm text-gray-700">
                                <span class="text-gray-500">[10:23:47]</span> Connected to WiFi: HomeWiFi
                            </li>
                            <li class="text-sm text-gray-700">
                                <span class="text-gray-500">[10:23:50]</span> Temperature sensor ready
                            </li>
                            <li class="text-sm text-gray-700">
                                <span class="text-gray-500">[10:23:52]</span> Humidity sensor ready
                            </li>
                            <li class="text-sm text-gray-700">
                                <span class="text-gray-500">[10:24:00]</span> First data received
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Control Section (Hidden by default) -->
        <div id="control-section" class="hidden">
            <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8">
                <div class="p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Device Controls</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- LED Control Panel -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-medium text-gray-800">
                                    <i class="fas fa-lightbulb text-yellow-500 mr-2"></i> LED Controls
                                </h3>
                                <div class="flex items-center">
                                    <span class="text-sm text-gray-500 mr-2">Status:</span>
                                    <span id="control-led-status" class="text-sm font-medium">OFF</span>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">LED State</label>
                                    <div class="flex space-x-4">
                                        <button id="led-on" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition">
                                            <i class="fas fa-power-off mr-2"></i>Turn ON
                                        </button>
                                        <button id="led-off" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg transition">
                                            <i class="fas fa-power-off mr-2"></i>Turn OFF
                                        </button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label for="control-brightness" class="block text-sm font-medium text-gray-700 mb-1">Brightness</label>
                                    <div class="flex items-center space-x-4">
                                        <input id="control-brightness" type="range" min="0" max="255" value="128" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                                        <span id="control-brightness-value" class="text-sm font-medium text-gray-700 w-16 text-center">50%</span>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Presets</label>
                                    <div class="grid grid-cols-3 gap-2">
                                        <button class="bg-blue-100 hover:bg-blue-200 text-blue-800 py-2 px-3 rounded-lg text-sm transition">
                                            <i class="fas fa-moon mr-1"></i> Night
                                        </button>
                                        <button class="bg-yellow-100 hover:bg-yellow-200 text-yellow-800 py-2 px-3 rounded-lg text-sm transition">
                                            <i class="fas fa-sun mr-1"></i> Day
                                        </button>
                                        <button class="bg-purple-100 hover:bg-purple-200 text-purple-800 py-2 px-3 rounded-lg text-sm transition">
                                            <i class="fas fa-theater-masks mr-1"></i> Party
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Relay Control Panel -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="font-medium text-gray-800">
                                    <i class="fas fa-plug text-blue-500 mr-2"></i> Relay Controls
                                </h3>
                                <div class="flex items-center">
                                    <span class="text-sm text-gray-500 mr-2">Status:</span>
                                    <span id="relay-status" class="text-sm font-medium">OFF</span>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Relay State</label>
                                    <div class="flex space-x-4">
                                        <button id="relay-on" class="flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition">
                                            <i class="fas fa-toggle-on mr-2"></i>Activate
                                        </button>
                                        <button id="relay-off" class="flex-1 bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg transition">
                                            <i class="fas fa-toggle-off mr-2"></i>Deactivate
                                        </button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Timer</label>
                                    <div class="flex items-center space-x-2">
                                        <input type="number" min="1" max="120" value="5" class="w-16 border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                        <span class="text-sm text-gray-600">minutes</span>
                                        <button class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg text-sm transition ml-auto">
                                            <i class="fas fa-clock mr-1"></i>Set Timer
                                        </button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Schedule</label>
                                    <div class="flex items-center space-x-2">
                                        <input type="time" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                        <button class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg text-sm transition ml-auto">
                                            <i class="fas fa-calendar-plus mr-1"></i>Add Schedule
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Control Logs -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Control History</h2>
                    <div class="bg-gray-50 rounded-lg p-4 h-64 overflow-y-auto">
                        <ul id="control-log-list" class="space-y-2">
                            <li class="text-sm text-gray-700">
                                <span class="text-gray-500">[10:25:12]</span> LED turned OFF
                            </li>
                            <li class="text-sm text-gray-700">
                                <span class="text-gray-500">[10:24:45]</span> Brightness set to 75%
                            </li>
                            <li class="text-sm text-gray-700">
                                <span class="text-gray-500">[10:24:30]</span> Relay activated
                            </li>
                            <li class="text-sm text-gray-700">
                                <span class="text-gray-500">[10:24:15]</span> LED turned ON
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Device Management Section (Hidden by default) -->
        <div id="management-section" class="hidden">
            <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8">
                <div class="p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-6">Device Management</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- WiFi Settings -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-medium text-gray-800 mb-4">
                                <i class="fas fa-wifi text-blue-500 mr-2"></i> WiFi Configuration
                            </h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label for="wifi-ssid" class="block text-sm font-medium text-gray-700 mb-1">SSID</label>
                                    <input type="text" id="wifi-ssid" class="w-full border border-gray-300 rounded-lg px-4 py-2" value="HomeWiFi">
                                </div>
                                
                                <div>
                                    <label for="wifi-password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                                    <input type="password" id="wifi-password" class="w-full border border-gray-300 rounded-lg px-4 py-2" value="********">
                                </div>
                                
                                <div class="flex justify-between items-center pt-2">
                                    <div>
                                        <span class="text-sm text-gray-500">Status:</span>
                                        <span class="text-sm font-medium text-green-600 ml-1">Connected</span>
                                    </div>
                                    <button class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg text-sm transition">
                                        <i class="fas fa-save mr-1"></i>Save Settings
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Device Settings -->
                        <div class="bg-gray-50 p-6 rounded-lg">
                            <h3 class="font-medium text-gray-800 mb-4">
                                <i class="fas fa-cog text-purple-500 mr-2"></i> Device Settings
                            </h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label for="device-name" class="block text-sm font-medium text-gray-700 mb-1">Device Name</label>
                                    <input type="text" id="device-name" class="w-full border border-gray-300 rounded-lg px-4 py-2" value="Living Room ESP32">
                                </div>
                                
                                <div>
                                    <label for="update-interval" class="block text-sm font-medium text-gray-700 mb-1">Update Interval (seconds)</label>
                                    <input type="number" id="update-interval" min="1" max="60" class="w-full border border-gray-300 rounded-lg px-4 py-2" value="5">
                                </div>
                                
                                <div class="flex justify-between items-center pt-2">
                                    <div>
                                        <span class="text-sm text-gray-500">Firmware:</span>
                                        <span class="text-sm font-medium text-gray-700 ml-1">v1.2.4</span>
                                    </div>
                                    <button class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg text-sm transition">
                                        <i class="fas fa-save mr-1"></i>Save Settings
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Firmware Update -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8">
                <div class="p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">Firmware Update</h2>
                    
                    <div class="bg-gray-50 p-6 rounded-lg">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                            <div class="mb-4 md:mb-0">
                                <h3 class="font-medium text-gray-800 mb-1">Current Version: v1.2.4</h3>
                                <p class="text-sm text-gray-600">Last updated: 2023-10-15</p>
                            </div>
                            
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                                <button class="bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg transition">
                                    <i class="fas fa-sync-alt mr-2"></i>Check for Updates
                                </button>
                                <button class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition">
                                    <i class="fas fa-upload mr-2"></i>Manual Update
                                </button>
                            </div>
                        </div>
                        
                        <div class="mt-6 border-t border-gray-200 pt-6">
                            <h4 class="font-medium text-gray-800 mb-2">Update Instructions</h4>
                            <ol class="list-decimal list-inside text-sm text-gray-700 space-y-1">
                                <li>Download the latest firmware from our website</li>
                                <li>Click "Manual Update" and select the firmware file</li>
                                <li>Do not power off the device during update</li>
                                <li>The device will restart automatically</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- System Actions -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <div class="p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">System Actions</h2>
                    
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                        <h3 class="font-medium text-red-800 mb-2">
                            <i class="fas fa-exclamation-triangle mr-2"></i>Danger Zone
                        </h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <button class="bg-red-100 hover:bg-red-200 text-red-800 py-3 px-4 rounded-lg transition flex items-center justify-center">
                                <i class="fas fa-redo mr-2"></i>Restart Device
                            </button>
                            <button class="bg-red-100 hover:bg-red-200 text-red-800 py-3 px-4 rounded-lg transition flex items-center justify-center">
                                <i class="fas fa-broom mr-2"></i>Factory Reset
                            </button>
                            <button class="bg-red-500 hover:bg-red-600 text-white py-3 px-4 rounded-lg transition flex items-center justify-center">
                                <i class="fas fa-power-off mr-2"></i>Power Off
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Navigation functionality
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = {
            dashboard: document.getElementById('dashboard-section'),
            control: document.getElementById('control-section'),
            management: document.getElementById('management-section')
        };

        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Update active nav link
                navLinks.forEach(navLink => {
                    navLink.classList.remove('active', 'text-blue-600');
                    navLink.classList.add('text-gray-600');
                });
                this.classList.add('active', 'text-blue-600');
                this.classList.remove('text-gray-600');
                
                // Show the selected section
                const section = this.getAttribute('data-section');
                Object.values(sections).forEach(sec => sec.classList.add('hidden'));
                sections[section].classList.remove('hidden');
            });
        });

        // Simulate data updates
        function updateSensorData() {
            // Random temperature between 20-30
            const temp = (20 + Math.random() * 10).toFixed(1);
            document.getElementById('temp-value').textContent = temp;
            document.getElementById('temp-timestamp').textContent = `Updated: ${new Date().toLocaleTimeString()}`;
            
            // Update gauge (0-1 range, where 0.5 is 25°C in our 20-30 range)
            const tempGauge = document.getElementById('temp-gauge');
            const tempRatio = (temp - 20) / 10;
            tempGauge.style.transform = `rotate(${0.5 + tempRatio * 0.5}turn)`;
            
            // Random humidity between 30-70
            const humidity = Math.floor(30 + Math.random() * 40);
            document.getElementById('humidity-value').textContent = humidity;
            document.getElementById('humidity-timestamp').textContent = `Updated: ${new Date().toLocaleTimeString()}`;
            
            // Update humidity gauge (0-1 range)
            const humidityGauge = document.getElementById('humidity-gauge');
            const humidityRatio = (humidity - 30) / 40;
            humidityGauge.style.transform = `rotate(${0.5 + humidityRatio * 0.5}turn)`;
            
            // Update memory status
            const freeMem = Math.floor(80 + Math.random() * 100);
            document.getElementById('memory-status').textContent = `Free: ${freeMem}KB`;
            
            // Add log entry
            const logList = document.getElementById('log-list');
            const logEntry = document.createElement('li');
            logEntry.className = 'text-sm text-gray-700';
            logEntry.innerHTML = `<span class="text-gray-500">[${new Date().toLocaleTimeString()}]</span> Sensor data updated`;
            logList.prepend(logEntry);
        }
        
        // LED toggle functionality
        const ledToggle = document.getElementById('led-toggle');
        const ledStatus = document.getElementById('led-status');
        const controlLedStatus = document.getElementById('control-led-status');
        
        ledToggle.addEventListener('change', function() {
            const isOn = this.checked;
            ledStatus.textContent = isOn ? 'ON' : 'OFF';
            controlLedStatus.textContent = isOn ? 'ON' : 'OFF';
        });
        
        // LED control buttons
        document.getElementById('led-on').addEventListener('click', function() {
            ledToggle.checked = true;
            ledStatus.textContent = 'ON';
            controlLedStatus.textContent = 'ON';
            addControlLog('LED turned ON');
        });
        
        document.getElementById('led-off').addEventListener('click', function() {
            ledToggle.checked = false;
            ledStatus.textContent = 'OFF';
            controlLedStatus.textContent = 'OFF';
            addControlLog('LED turned OFF');
        });
        
        // Relay control buttons
        const relayStatus = document.getElementById('relay-status');
        document.getElementById('relay-on').addEventListener('click', function() {
            relayStatus.textContent = 'ON';
            addControlLog('Relay activated');
        });
        
        document.getElementById('relay-off').addEventListener('click', function() {
            relayStatus.textContent = 'OFF';
            addControlLog('Relay deactivated');
        });
        
        // Brightness sliders
        const brightnessSlider = document.getElementById('brightness-slider');
        const brightnessValue = document.getElementById('brightness-value');
        const controlBrightness = document.getElementById('control-brightness');
        const controlBrightnessValue = document.getElementById('control-brightness-value');
        
        function updateBrightnessDisplay(slider, display) {
            const percent = Math.round((slider.value / 255) * 100);
            display.textContent = `${percent}%`;
        }
        
        brightnessSlider.addEventListener('input', function() {
            updateBrightnessDisplay(this, brightnessValue);
            controlBrightness.value = this.value;
            updateBrightnessDisplay(controlBrightness, controlBrightnessValue);
        });
        
        controlBrightness.addEventListener('input', function() {
            updateBrightnessDisplay(this, controlBrightnessValue);
            brightnessSlider.value = this.value;
            updateBrightnessDisplay(brightnessSlider, brightnessValue);
            addControlLog(`Brightness set to ${controlBrightnessValue.textContent}`);
        });
        
        // Add control log entry
        function addControlLog(message) {
            const logList = document.getElementById('control-log-list');
            const logEntry = document.createElement('li');
            logEntry.className = 'text-sm text-gray-700';
            logEntry.innerHTML = `<span class="text-gray-500">[${new Date().toLocaleTimeString()}]</span> ${message}`;
            logList.prepend(logEntry);
        }
        
        // Apply settings button
        document.getElementById('apply-settings').addEventListener('click', function() {
            const isLedOn = ledToggle.checked;
            const brightness = brightnessSlider.value;
            
            // Here you would typically send this data to your ESP32
            // For now, we'll just log it
            const logList = document.getElementById('log-list');
            const logEntry = document.createElement('li');
            logEntry.className = 'text-sm text-green-700 font-medium';
            logEntry.innerHTML = `<span class="text-gray-500">[${new Date().toLocaleTimeString()}]</span> Settings applied: LED ${isLedOn ? 'ON' : 'OFF'}, Brightness ${brightnessValue.textContent}`;
            logList.prepend(logEntry);
            
            // Show a temporary success message
            const btn = this;
            btn.innerHTML = '<i class="fas fa-check"></i><span>Settings Applied!</span>';
            btn.classList.remove('bg-blue-500', 'hover:bg-blue-600');
            btn.classList.add('bg-green-500', 'hover:bg-green-600');
            
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-paper-plane"></i><span>Apply Settings</span>';
                btn.classList.remove('bg-green-500', 'hover:bg-green-600');
                btn.classList.add('bg-blue-500', 'hover:bg-blue-600');
            }, 2000);
        });
        
        // Clear logs buttons
        document.getElementById('clear-logs').addEventListener('click', function() {
            document.getElementById('log-list').innerHTML = '';
        });
        
        // Refresh button
        document.getElementById('refresh-btn').addEventListener('click', function() {
            const btn = this;
            btn.classList.add('animate-spin');
            updateSensorData();
            
            setTimeout(() => {
                btn.classList.remove('animate-spin');
            }, 1000);
        });
        
        // Simulate initial data and periodic updates
        updateSensorData();
        setInterval(updateSensorData, 5000);
        
        // Simulate connection status changes
        setInterval(() => {
            const status = document.getElementById('connection-status');
            const dot = status.previousElementSibling;
            
            if (Math.random() > 0.9) { // 10% chance to "disconnect"
                status.textContent = "Disconnected";
                status.classList.remove('bg-green-100', 'text-green-800');
                status.classList.add('bg-red-100', 'text-red-800');
                dot.classList.remove('bg-green-500');
                dot.classList.add('bg-red-500');
                
                setTimeout(() => {
                    status.textContent = "Connected";
                    status.classList.remove('bg-red-100', 'text-red-800');
                    status.classList.add('bg-green-100', 'text-green-800');
                    dot.classList.remove('bg-red-500');
                    dot.classList.add('bg-green-500');
                }, 2000);
            }
        }, 10000);
    </script>
</body>
</html>